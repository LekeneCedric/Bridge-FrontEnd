{"version":3,"file":"src_app_pages_home_demandes_demandes_module_ts.js","mappings":"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","sources":["./src/app/pages/home/demandes/demandes-routing.module.ts","./src/app/pages/home/demandes/demandes.module.ts","./src/app/pages/home/demandes/demandes.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DemandesPage } from './demandes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DemandesPage\n  },\n  {\n    path:'details/:id',\n    loadChildren: () => import('../../details/details-demande/details-demande.module').then(m => m.DetailsDemandePageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DemandesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DemandesPageRoutingModule } from './demandes-routing.module';\n\nimport { DemandesPage } from './demandes.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DemandesPageRoutingModule\n  ],\n  declarations: [DemandesPage]\n})\nexport class DemandesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ModalCategoryPage } from 'src/app/modals/modal-category/modal-category.page';\nimport { IDemande } from 'src/app/models/demande.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\n\n@Component({\n  selector: 'app-demandes',\n  templateUrl: './demandes.page.html',\n  styleUrls: ['./demandes.page.scss'],\n})\nexport class DemandesPage implements OnInit {\n\n  constructor(public manageDataService: ManageDataService,private modalCtrl:ModalController) { }\n\n  ngOnInit() {\n    this.notifications = [];\n    this.demandes = [];\n    this.getDemande();\n    this.getMyNotifications();\n    setInterval(()=>{\n      if(this.loadingDemandes==false && this.demandes.length<1){\n          this.is_null_Demande = true;\n      }\n      else{\n        this.is_null_Demande = false;\n      }\n    },100)\n    setTimeout(()=>{\n      if(this.is_null_Demande)\n      {\n        this.demandes.length<1 ? this.loadingDemandes == true : this.loadingDemandes = false;\n      }\n      else if(!this.is_null_Demande)\n      {\n        this.demandes.length<1 ? this.loadingDemandes == true : this.loadingDemandes = false;\n      }\n      else{\n        this.loadingDemandes = false;\n      }\n      \n    },100)\n    setTimeout(()=>{\n      this.demandes.length <1 ? this.is_null_Demande = true:this.is_null_Demande = false;\n      this.loadingDemandes = false\n    },10000)\n    this.loadingDemandes= true;\n    this.is_null_Demande= false;\n    this.myData = JSON.parse(localStorage.getItem('mydata'));\n    this.myid = JSON.parse(localStorage.getItem('mydata')).id;\n\n    setInterval(()=>{\n      const tabBar = document.getElementById('app-tab-bar');\n      tabBar.style.display = 'flex';\n    },100)\n  }\n\n/*------------------------------VARIABLES------------------------------*/\npublic loadingDemandes : boolean = true;\npublic is_null_Demande : boolean = false;\npublic myData:any = {};\npublic myid :number = null;\npublic demandes:IDemande[]=[];\npublic demandesContainer:IDemande[] = [];\npublic storage = 'http://127.0.0.1:8000/storage/';\npublic selectedCategory : string[]=[];\npublic notifications:any[] = [];\n/*------------------------------FUNCTIONS------------------------------*/\nget id ():number{return this.myid}\npublic refreshFilter(){\n  this.demandes = this.demandesContainer;\n  this.selectedCategory = [];\n}\npublic getMyNotifications(){\n  this.manageDataService.getNotificationDonateur(this.myid).toPromise().then(\n    data=>{\n      console.log(data)\n      data.forEach((notif)=>{\n        notif.vu==0? this.notifications.push(notif):null;\n      })\n    }\n  )\n}\npublic async openModal(){\n  const modal = await this.modalCtrl.create({\n    component:ModalCategoryPage,\n    componentProps:{\n      selectedCategory:this.selectedCategory\n    },\n    breakpoints:[0,0.65],\n      initialBreakpoint:0.65,\n      animated:true,\n      handle:true\n  });\n  modal.present();\n  const {data,role } = await modal.onWillDismiss();\n  if(role ==='confirm'){\n    this.selectedCategory=data;\n    this.demandes = this.demandesContainer;\n    this.selectedCategory.length>0?\n    this.demandes = this.demandes.filter((demande)=>{\n      return this.selectedCategory.includes(demande.category)\n    })\n    :null;\n  }\n}\npublic refresh(){\n  this.refreshFilter()\n  setTimeout(()=>{\n    this.ngOnInit();\n  },500)\n}\npublic doRefresh(event){\n  setTimeout(()=>{\n   this.ngOnInit(); \n   event.target.complete();\n  },500)}\npublic getDemande(){\n  return this.manageDataService.getDemandes().toPromise().then(\n   data=>{\n    this.demandes = data;\n    this.demandesContainer = data;\n    console.log(data)\n   }\n  ).catch(\n    err=>{\n\n    }\n  )\n}\n}\n"],"names":["Component","ModalController","ModalCategoryPage","ManageDataService","DemandesPage","constructor","manageDataService","modalCtrl","ngOnInit","notifications","demandes","getDemande","getMyNotifications","setInterval","loadingDemandes","length","is_null_Demande","setTimeout","myData","JSON","parse","localStorage","getItem","myid","id","tabBar","document","getElementById","style","display","refreshFilter","demandesContainer","selectedCategory","getNotificationDonateur","toPromise","then","data","console","log","forEach","notif","vu","push","openModal","modal","create","component","componentProps","breakpoints","initialBreakpoint","animated","handle","present","role","onWillDismiss","filter","demande","includes","category","refresh","doRefresh","event","target","complete","getDemandes","catch","err","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}