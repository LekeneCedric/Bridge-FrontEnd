{"version":3,"file":"src_app_pages_details_details-don_details-don_module_ts.js","mappings":"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","sources":["./src/app/pages/details/details-don/details-don-routing.module.ts","./src/app/pages/details/details-don/details-don.module.ts","./src/app/pages/details/details-don/details-don.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailsDonPage } from './details-don.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailsDonPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailsDonPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailsDonPageRoutingModule } from './details-don-routing.module';\n\nimport { DetailsDonPage } from './details-don.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DetailsDonPageRoutingModule\n  ],\n  declarations: [DetailsDonPage]\n})\nexport class DetailsDonPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport TimeAgo from 'javascript-time-ago';\nimport { IDon } from 'src/app/models/don.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { environment } from 'src/environments/environment';\n@Component({\n  selector: 'app-details-don',\n  templateUrl: './details-don.page.html',\n  styleUrls: ['./details-don.page.scss'],\n})\nexport class DetailsDonPage implements OnInit {\n\n  constructor(private navCtrl:NavController,private route:ActivatedRoute,\n    private manageDataService:ManageDataService) { }\n\n  ngOnInit() {\n  this.id = JSON.parse(localStorage.getItem('mydata')).id as number;\n  this.donsSimilaires = [];\n  this.detail_id = this.route.snapshot.params.id;\n  this.getDon();\n  setTimeout(()=>{\n    this.getDonSimilaires();\n  },2000)\n    const tabBar = document.getElementById('app-tab-bar');\n  if (tabBar !== null) {\n    tabBar.style.display = 'none';\n  }}\n\n  /*--------------------------------VARIABLES--------------------------------*/\n  public id:number = null;\n  public elapsedTime:any;\n  public detail_id: number=null;\n  public don:IDon = null;\n  public donsSimilaires:IDon[];\n  public storage = environment.storage;\n  public nbreReserve:number=null;\n  public reserve :boolean = false;\n  public slideOpts = {\n    initialSlide: 0,\n    speed: 1000,\n    autoplay: {\n          delay: 5000,\n          disableOnInteraction: false,\n          stopOnLastSlide: false\n    }\n  }\n  /*--------------------------------FUNCTIONS--------------------------------*/\n  get myId():number{\n   return this.id;\n  }\n  image(don:any):any{\n    let url = '';\n    don.media.length>1?url= `${this.storage+don.media[0].filePath.toString()}`: url='../../../../../../assets/images/empty.webp'\n   \n    return `url(${url})`;\n  }\n  \n  navBack(){\n    this.navCtrl.back();\n  }\n  doRefresh(event){\n    setTimeout(()=>{\n     this.ngOnInit(); \n     event.target.complete();\n    },500)\n   }\n  getDon(){\n    this.manageDataService.getOneDon(this.detail_id).toPromise()\n    .then(\n      (data)=>{\n        data.nombre_reserve>0?this.reserve = true :this.reserve = false;\n        this.don = data;\n        TimeAgo.addDefaultLocale(fr);\n        const timeAgo = new TimeAgo('fr-EU');\n        this.elapsedTime = timeAgo.format(new Date(Date.parse(data.created_at)));\n        this.manageDataService.nbreInteressesDon(data.id).toPromise().then(\n          (data)=>{\n            this.nbreReserve = data.nb;\n          }\n        )\n      }\n    )\n    .catch(err=>{\n      this.navBack();\n    })\n  }\n  getDonSimilaires(){\n    const id:number = this.don.id;\n    const category:string = this.don.category;\n    this.manageDataService.getDonSimilaires(id,category).toPromise().then(\n      (data)=>{\n       data.forEach((don)=>{\n         this.donsSimilaires.unshift(don);\n       })\n      }\n    ).catch((err)=>{\n    console.log(err);\n    })\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}