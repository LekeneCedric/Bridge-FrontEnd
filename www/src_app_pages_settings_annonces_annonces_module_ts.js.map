{"version":3,"file":"src_app_pages_settings_annonces_annonces_module_ts.js","mappings":"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","sources":["./src/app/pages/settings/annonces/annonces-routing.module.ts","./src/app/pages/settings/annonces/annonces.module.ts","./src/app/pages/settings/annonces/annonces.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AnnoncesPage } from './annonces.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AnnoncesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AnnoncesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AnnoncesPageRoutingModule } from './annonces-routing.module';\n\nimport { AnnoncesPage } from './annonces.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AnnoncesPageRoutingModule\n  ],\n  declarations: [AnnoncesPage]\n})\nexport class AnnoncesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AlertController, ModalController, NavController, ToastController } from '@ionic/angular';\nimport TimeAgo from 'javascript-time-ago';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { ModalEditDonsPage } from 'src/app/modals/modal-edit-dons/modal-edit-dons.page';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport { environment } from 'src/environments/environment';\n@Component({\n  selector: 'app-annonces',\n  templateUrl: './annonces.page.html',\n  styleUrls: ['./annonces.page.scss'],\n})\nexport class AnnoncesPage implements OnInit {\n\n  constructor(private route:ActivatedRoute,private manageDataService:ManageDataService,\n    private navController:NavController,private toast:ToastController,\n    private alertController:AlertController,private modalCtrl:ModalController) { }\n\n  ngOnInit() {\n\n    TimeAgo.addDefaultLocale(fr);\n    this.id  = this.route.snapshot.params['id'];\n    this.manageDataService.getDonateur(this.Id).toPromise().then(\n      data=>{\n        console.log(data)\n        this.userInfo = data;\n      }\n    ).catch(err=>{\n      console.log(err);\n    })\n  }\n\n  /*--------------------------------VARIABLES--------------------------------*/\n  private id:number = null;\n  public userInfo = null;\n  public selectedSegment='dons';\n  public storage = environment.storage;\n  /*--------------------------------FUNCTIONS----------------------------------------------------*/\n  public async openModalModif(don:any){\n    console.log(don)\n    const modal = await this.modalCtrl.create({\n      component:ModalEditDonsPage,\n      componentProps:{\n        don : don\n      },\n      breakpoints:[0,1],\n      initialBreakpoint:1,\n      animated:true,\n      handle:true\n    });\n    modal.present();\n    const {data,role } = await modal.onWillDismiss();\n    if(role ==='confirm'){\n      this.ngOnInit();\n    }\n  }\n  public async deleteDon(don:any){\n    const alert = await this.alertController.create({\n      cssClass:'deconnexion-alert',\n      header: `voulez vous supprime ${don.titre} ?`,\n      buttons: [\n        {\n          text: 'annuler',\n          role: 'cancel',\n          handler: () => {\n          },\n        },\n        {\n          text: 'oui',\n          role: 'confirm',\n          handler: () => {\n            this.manageDataService.deleteDon(don.id).toPromise().then(\n              async data=>{\n                const toast = this.toast.create({\n                  message:`annonce de don supprime avec success`,\n                  icon: 'information-circle',\n                  duration:1000,\n                  color:\"danger\"\n                });\n                (await (toast)).present(); \n              }\n            ).catch(async err=>{\n              const toast = this.toast.create({\n                message:`Erreur lors de la supression du don`,\n                icon: 'information-circle',\n                duration:1000,\n                color:\"warning\"\n              });\n              (await (toast)).present();\n            }).finally(()=>{\n              this.ngOnInit();\n            })\n          },\n        },\n      ],\n    });\n    await alert.present();\n   \n  }\n  public navBack(){\n    this.navController.back();\n  }\n  public timeAgo(created_at:any):string{\n    const timeAgo = new TimeAgo('fr-EU');\n    const elapsedTime = timeAgo.format(new Date(Date.parse(created_at)-60*1000));\n    return elapsedTime\n  }\n image(don:any):any{\n    let url = '';\n    don.media.length>0?url= `${this.storage+don.media[0].filePath}`: url='../../../../../../assets/images/empty.webp'  \n    return url;\n  }\n refresh(){\n  this.ngOnInit();\n }\n doRefresh(event){\n  setTimeout(()=>{\n   this.refresh(); \n   event.target.complete();\n  },500)\n }\n  get Id(){\n    return this.id;\n  }\n  public segmentChanged(event:any){\n    this.selectedSegment = event.target.value; \n   }\n}\n"],"names":["Component","ActivatedRoute","AlertController","ModalController","NavController","ToastController","TimeAgo","fr","ModalEditDonsPage","ManageDataService","environment","AnnoncesPage","constructor","route","manageDataService","navController","toast","alertController","modalCtrl","storage","ngOnInit","addDefaultLocale","id","snapshot","params","getDonateur","Id","toPromise","then","data","console","log","userInfo","catch","err","openModalModif","don","modal","create","component","componentProps","breakpoints","initialBreakpoint","animated","handle","present","role","onWillDismiss","deleteDon","alert","cssClass","header","titre","buttons","text","handler","message","icon","duration","color","finally","navBack","back","timeAgo","created_at","elapsedTime","format","Date","parse","image","url","media","length","filePath","refresh","doRefresh","event","setTimeout","target","complete","segmentChanged","selectedSegment","value","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}