{"version":3,"file":"src_app_pages_settings_annonces_annonces_module_ts.js","mappings":"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","sources":["./src/app/pages/settings/annonces/annonces-routing.module.ts","./src/app/pages/settings/annonces/annonces.module.ts","./src/app/pages/settings/annonces/annonces.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AnnoncesPage } from './annonces.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AnnoncesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AnnoncesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AnnoncesPageRoutingModule } from './annonces-routing.module';\n\nimport { AnnoncesPage } from './annonces.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AnnoncesPageRoutingModule\n  ],\n  declarations: [AnnoncesPage]\n})\nexport class AnnoncesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AlertController, NavController, ToastController } from '@ionic/angular';\nimport TimeAgo from 'javascript-time-ago';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport { environment } from 'src/environments/environment';\n@Component({\n  selector: 'app-annonces',\n  templateUrl: './annonces.page.html',\n  styleUrls: ['./annonces.page.scss'],\n})\nexport class AnnoncesPage implements OnInit {\n\n  constructor(private route:ActivatedRoute,private manageDataService:ManageDataService,\n    private navController:NavController,private toast:ToastController,\n    private alertController:AlertController) { }\n\n  ngOnInit() {\n\n    TimeAgo.addDefaultLocale(fr);\n    this.id  = this.route.snapshot.params['id'];\n    this.manageDataService.getDonateur(this.Id).toPromise().then(\n      data=>{\n        console.log(data)\n        this.userInfo = data;\n      }\n    ).catch(err=>{\n      console.log(err);\n    })\n  }\n\n  /*--------------------------------VARIABLES--------------------------------*/\n  private id:number = null;\n  public userInfo = null;\n  public selectedSegment='dons';\n  public storage = environment.storage;\n  /*--------------------------------FUNCTIONS----------------------------------------------------*/\n  public async deleteDon(don:any){\n    const alert = await this.alertController.create({\n      cssClass:'deconnexion-alert',\n      header: `voulez vous supprime ${don.titre} ?`,\n      buttons: [\n        {\n          text: 'annuler',\n          role: 'cancel',\n          handler: () => {\n          },\n        },\n        {\n          text: 'oui',\n          role: 'confirm',\n          handler: () => {\n            this.manageDataService.deleteDon(don.id).toPromise().then(\n              async data=>{\n                const toast = this.toast.create({\n                  message:`annonce de don supprime avec success`,\n                  icon: 'information-circle',\n                  duration:1000,\n                  color:\"danger\"\n                });\n                (await (toast)).present(); \n              }\n            ).catch(async err=>{\n              const toast = this.toast.create({\n                message:`Erreur lors de la supression du don`,\n                icon: 'information-circle',\n                duration:1000,\n                color:\"warning\"\n              });\n              (await (toast)).present();\n            }).finally(()=>{\n              this.ngOnInit();\n            })\n          },\n        },\n      ],\n    });\n    await alert.present();\n   \n  }\n  public navBack(){\n    this.navController.back();\n  }\n  public timeAgo(created_at:any):string{\n    const timeAgo = new TimeAgo('fr-EU');\n    const elapsedTime = timeAgo.format(new Date(Date.parse(created_at)-60*1000));\n    return elapsedTime\n  }\n image(don:any):any{\n    let url = '';\n    don.media.length>0?url= `${this.storage+don.media[0].filePath}`: url='../../../../../../assets/images/empty.webp'  \n    return url;\n  }\n refresh(){\n  this.ngOnInit();\n }\n doRefresh(event){\n  setTimeout(()=>{\n   this.refresh(); \n   event.target.complete();\n  },500)\n }\n  get Id(){\n    return this.id;\n  }\n  public segmentChanged(event:any){\n    this.selectedSegment = event.target.value; \n   }\n}\n"],"names":["Component","ActivatedRoute","AlertController","NavController","ToastController","TimeAgo","fr","ManageDataService","environment","AnnoncesPage","constructor","route","manageDataService","navController","toast","alertController","storage","ngOnInit","addDefaultLocale","id","snapshot","params","getDonateur","Id","toPromise","then","data","console","log","userInfo","catch","err","deleteDon","don","alert","create","cssClass","header","titre","buttons","text","role","handler","message","icon","duration","color","present","finally","navBack","back","timeAgo","created_at","elapsedTime","format","Date","parse","image","url","media","length","filePath","refresh","doRefresh","event","setTimeout","target","complete","segmentChanged","selectedSegment","value","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}