{"version":3,"file":"src_app_pages_home_dons_dons_module_ts.js","mappings":"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","sources":["./src/app/pages/home/dons/dons-routing.module.ts","./src/app/pages/home/dons/dons.module.ts","./src/app/pages/home/dons/dons.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DonsPage } from './dons.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DonsPage,\n  },\n  {\n    path:'details/:id',\n    loadChildren: () => import('../../details/details-don/details-don.module').then(m => m.DetailsDonPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DonsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DonsPageRoutingModule } from './dons-routing.module';\n\nimport { DonsPage } from './dons.page';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder/ngx';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DonsPageRoutingModule\n  ],\n providers:[NativeGeocoder],\n  declarations: [DonsPage]\n})\nexport class DonsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActionSheetController, ModalController } from '@ionic/angular';\nimport { IDon } from 'src/app/models/don.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\n\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderResult } from '@ionic-native/native-geocoder/ngx';\nimport { ModalCategoryPage } from 'src/app/modals/modal-category/modal-category.page';\nimport { ModalEtatPage } from 'src/app/modals/modal-etat/modal-etat.page';\n@Component({\n  selector: 'app-dons',\n  templateUrl: './dons.page.html',\n  styleUrls: ['./dons.page.scss'],\n})\nexport class DonsPage implements OnInit {\n\n  constructor(private manageDataService:ManageDataService,\n    private nativGeocoder:NativeGeocoder,private modalCtrl:ModalController) { }\n\n  ngOnInit() {\n    this.dons = [];\n    this.getDons();\n    this.myid = JSON.parse(localStorage.getItem('mydata')).id;\n    setInterval(()=>{\n      const tabBar = document.getElementById('app-tab-bar');\n      tabBar.style.display = 'flex';\n    },100)\n    this.manageDataService.getDons().toPromise().then(\n      data=>{\n        data.data.forEach(don=>{\n          this.dons.push(don);\n        })\n      }\n    ).catch(err=>{\n\n    })\n  }\n  /*-----------------------------VARIABLES-----------------------------*/\n  private myid :number = null;\n  public dons:IDon[]=[];\n  GeocoderOption:any={useLocale: true,maxResults: 5};\n  public selectedCategory : string[]=[];\n  public selectedEtat:string[]=[];\n  public storage = 'http://127.0.0.1:8000/storage/';\n  /*-----------------------------FUNCTIONS-----------------------------*/\n  get id ():number{return this.myid}\n  public async openModal(){\n    const modal = await this.modalCtrl.create({\n      component:ModalCategoryPage,\n      componentProps:{\n        selectedCategory:this.selectedCategory\n      },\n      breakpoints:[0,0.65],\n      initialBreakpoint:0.65,\n      animated:true,\n      handle:true\n    });\n    modal.present();\n    const {data,role } = await modal.onWillDismiss();\n    if(role ==='confirm'){\n      this.selectedCategory=data;\n    }\n  }\n  public async openModalEtat(){\n  const modal = await this.modalCtrl.create({\n    component:ModalEtatPage,\n    componentProps:{\n      selectedEtat:this.selectedEtat\n    },\n    mode:'md',\n      breakpoints:[0,1],\n      initialBreakpoint:0.35,\n      animated:true,\n      handle:true\n  });\n  modal.present();\n  const {data,role} = await modal.onWillDismiss();\n  if(role ==='confirm'){\n    this.selectedEtat=data;\n  }\n}\n  public refreshFilter(){\n    this.selectedCategory = [];\n    this.selectedEtat = [];\n  }\n  image(don:any):any{\n    let url = '';\n    don.media.length>1?url= `${this.storage+don.media[0].filePath.toString()}`: url='../../../../../../assets/images/empty.webp'\n   \n    return `url(${url})`;\n  }\n  getDons(){\n    this.manageDataService.getDons().toPromise().then(\n      data=>{\n        data.forEach((don)=>{\n          this.dons.unshift(don);\n        })\n      }\n    ).catch(err=>{\n\n    })\n  }\n  public filtre(category:string , etat:string):boolean{\n    let res:boolean;\n  (this.selectedCategory.includes(category)&&this.selectedEtat.includes(etat))||\n  (this.selectedCategory.includes(category)&&this.selectedEtat.length<1)||\n  (this.selectedCategory.length <1 && this.selectedEtat.includes(etat))||\n  (this.selectedCategory.length<1&&this.selectedEtat.length<1)?res=true:res=false;\n  return res;\n  }\n  \n  doRefresh(event){\n   setTimeout(()=>{\n    this.ngOnInit(); \n    event.target.complete();\n   },500)\n  }\n  refresh(){\n    this.ngOnInit();\n  }\n}\n"],"names":["Component","ModalController","ManageDataService","NativeGeocoder","ModalCategoryPage","ModalEtatPage","DonsPage","constructor","manageDataService","nativGeocoder","modalCtrl","useLocale","maxResults","ngOnInit","dons","getDons","myid","JSON","parse","localStorage","getItem","id","setInterval","tabBar","document","getElementById","style","display","toPromise","then","data","forEach","don","push","catch","err","openModal","modal","create","component","componentProps","selectedCategory","breakpoints","initialBreakpoint","animated","handle","present","role","onWillDismiss","openModalEtat","selectedEtat","mode","refreshFilter","image","url","media","length","storage","filePath","toString","unshift","filtre","category","etat","res","includes","doRefresh","event","setTimeout","target","complete","refresh","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}