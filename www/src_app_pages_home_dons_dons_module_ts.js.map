{"version":3,"file":"src_app_pages_home_dons_dons_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEhB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gDAAQ;KACpB;IACD;QACE,IAAI,EAAC,aAAa;QAClB,YAAY,EAAE,GAAG,EAAE,CAAC,8MAAsD,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,oBAAoB,CAAC;KAC7G;CACF,CAAC;IAMW,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACpBO;AACM;AACF;AAEA;AAEiB;AAEvB;AAC4B;IAWtD,cAAc,SAAd,cAAc;CAAG;AAAjB,cAAc;IAV1B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,uEAAqB;SACtB;QACF,SAAS,EAAC,CAAC,6EAAc,CAAC;QACzB,YAAY,EAAE,CAAC,gDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB3B;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAMaW,QAAQ,SAARA,QAAQ;EAEnBC,YAAoBC,iBAApB,EACUC,aADV,EAC+CC,SAD/C,EAEUC,WAFV,EAE2CC,IAF3C,EAEmEC,MAFnE,EAEgF;IAF5D;IACV;IAAqC;IACrC;IAAiC;IAAwB;IAgBnE;;IACQ,YAAe,IAAf;IACD,YAAY,EAAZ;IACP,sBAAmB;MAACC,SAAS,EAAE,IAAZ;MAAiBC,UAAU,EAAE;IAA7B,CAAnB;IACO,wBAA4B,EAA5B;IACA,oBAAsB,EAAtB;IACA,eAAU,gCAAV;IACA,oBAAuB,CAAvB;IACA,iBAAqB,KAAKC,YAA1B;IACA,iBAAoB,IAApB;IACA,cAAa,EAAb;EA1B8E;;EAErFC,QAAQ;IACN,KAAKC,MAAL,GAAcC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAd;IACAC,OAAO,CAACC,GAAR,CAAY,KAAKN,MAAjB;IACA,KAAKF,YAAL,GAAoB,CAApB;IACA,KAAKS,IAAL,GAAY,EAAZ;IACA,KAAKC,OAAL;IACA,KAAKC,IAAL,GAAYR,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,EAA2CM,EAAvD;IACAC,WAAW,CAAC,MAAI;MACd,MAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAf;MACAF,MAAM,CAACG,KAAP,CAAaC,OAAb,GAAuB,MAAvB;IACD,CAHU,EAGT,GAHS,CAAX;IAIAhC,4EAAA,CAAyBJ,qEAAzB;EAED;EAYD;;;EACOsC,OAAO,CAACC,UAAD,EAAe;IAC3B,MAAMD,OAAO,GAAG,IAAIlC,2DAAJ,CAAY,OAAZ,CAAhB;IACA,MAAMoC,WAAW,GAAGF,OAAO,CAACG,MAAR,CAAe,IAAIC,IAAJ,CAASA,IAAI,CAACpB,KAAL,CAAWiB,UAAX,IAAuB,KAAG,IAAnC,CAAf,CAApB;IACA,OAAOC,WAAP;EACD;;EACK,IAAFV,EAAE;IAAW,OAAO,KAAKD,IAAZ;EAAiB;;EACrBc,SAAS;IAAA;;IAAA;MACpB,MAAMC,KAAK,SAAS,KAAI,CAAChC,SAAL,CAAeiC,MAAf,CAAsB;QACxCC,SAAS,EAAC5C,gGAD8B;QAExC6C,cAAc,EAAC;UACbC,gBAAgB,EAAC,KAAI,CAACA;QADT,CAFyB;QAKxCC,WAAW,EAAC,CAAC,CAAD,EAAG,IAAH,CAL4B;QAMxCC,iBAAiB,EAAC,IANsB;QAOxCC,QAAQ,EAAC,IAP+B;QAQxCC,MAAM,EAAC;MARiC,CAAtB,CAApB;MAUAR,KAAK,CAACS,OAAN;MACA,MAAM;QAACC,IAAD;QAAMC;MAAN,UAAqBX,KAAK,CAACY,aAAN,EAA3B;;MACA,IAAGD,IAAI,KAAI,SAAX,EAAqB;QACnB,KAAI,CAACP,gBAAL,GAAsBM,IAAtB;MACD;IAfmB;EAgBrB;;EACYG,aAAa;IAAA;;IAAA;MAC1B,MAAMb,KAAK,SAAS,MAAI,CAAChC,SAAL,CAAeiC,MAAf,CAAsB;QACxCC,SAAS,EAAC3C,oFAD8B;QAExC4C,cAAc,EAAC;UACbW,YAAY,EAAC,MAAI,CAACA;QADL,CAFyB;QAKxCC,IAAI,EAAC,IALmC;QAMtCV,WAAW,EAAC,CAAC,CAAD,EAAG,CAAH,CAN0B;QAOtCC,iBAAiB,EAAC,IAPoB;QAQtCC,QAAQ,EAAC,IAR6B;QAStCC,MAAM,EAAC;MAT+B,CAAtB,CAApB;MAWAR,KAAK,CAACS,OAAN;MACA,MAAM;QAACC,IAAD;QAAMC;MAAN,UAAoBX,KAAK,CAACY,aAAN,EAA1B;;MACA,IAAGD,IAAI,KAAI,SAAX,EAAqB;QACnB,MAAI,CAACG,YAAL,GAAkBJ,IAAlB;MACD;IAhByB;EAiB3B;;EACQM,aAAa;IAClB,KAAKZ,gBAAL,GAAwB,EAAxB;IACA,KAAKU,YAAL,GAAoB,EAApB;EACD;;EACDG,KAAK,CAACC,GAAD,EAAQ;IACX,IAAIC,GAAG,GAAG,EAAV;IACAD,GAAG,CAACE,KAAJ,CAAUC,MAAV,GAAiB,CAAjB,GAAmBF,GAAG,GAAE,GAAG,KAAKG,OAAL,GAAaJ,GAAG,CAACE,KAAJ,CAAU,CAAV,EAAaG,QAAQ,EAA7D,GAAiEJ,GAAG,GAAC,4CAArE;IACA,OAAOA,GAAP;EACD;;EACDnC,OAAO;IAEL,KAAKlB,iBAAL,CAAuBkB,OAAvB,CAA+B,KAAKV,YAApC,EAAkDkD,SAAlD,GAA8DC,IAA9D,CACEf,IAAI,IAAE;MACJ,KAAKgB,SAAL,GAAiBhB,IAAI,CAACgB,SAAtB;MACA7C,OAAO,CAACC,GAAR,CAAY,KAAK4C,SAAjB;MACAhB,IAAI,CAACA,IAAL,CAAUiB,OAAV,CAAmBT,GAAD,IAAO;QACvB,KAAKnC,IAAL,CAAU6C,IAAV,CAAeV,GAAf;MACD,CAFD;IAGD,CAPH,EAQEW,KARF,CAQQC,GAAG,IAAE,CAEZ,CAVD,EAUGC,OAVH,CAUW,MAAI;MACb,KAAKzD,YAAL,IAAmB,CAAnB;IACD,CAZD;EAaD;;EACM0D,QAAQ,CAACC,KAAD,EAAU;IACvBC,UAAU,CAAC,MAAI;MACbrD,OAAO,CAACC,GAAR,CAAY,KAAKR,YAAjB,EAA8B,KAAKoD,SAAnC;MACA,KAAKpD,YAAL,IAAqB,KAAKoD,SAA1B,GAAsC,KAAK1C,OAAL,EAAtC,GAAqD,KAAKV,YAA1D;MACA2D,KAAK,CAACE,MAAN,CAAaC,QAAb;IACD,CAJS,EAIR,GAJQ,CAAV;EAMD,CAzGkB,CA0GnB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;EAEAC,SAAS,CAACJ,KAAD,EAAM;IACdC,UAAU,CAAC,MAAI;MACd,KAAK3D,QAAL;MACA0D,KAAK,CAACE,MAAN,CAAaC,QAAb;IACA,CAHS,EAGR,GAHQ,CAAV;EAIA;;EACDE,OAAO;IACL,KAAK/D,QAAL;EACD;;AA3HkB;;;QAdZpB,+FAAiBA;;QAEjBE,6EAAcA;;QAJSH,4DAAeA;;QAStCQ,2EAAWA;;QADXD,6DAAUA;;QAEVE,oDAAMA;;;AAMFC,QAAQ,uDALpBX,yDAAS,CAAC;EACTsF,QAAQ,EAAE,UADD;EAETC,UAAAA,uDAFS;;AAAA,CAAD,CAKW,GAAR5E,QAAQ,CAAR","sources":["./src/app/pages/home/dons/dons-routing.module.ts","./src/app/pages/home/dons/dons.module.ts","./src/app/pages/home/dons/dons.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DonsPage } from './dons.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DonsPage,\n  },\n  {\n    path:'details/:id',\n    loadChildren: () => import('../../details/details-don/details-don.module').then(m => m.DetailsDonPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DonsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DonsPageRoutingModule } from './dons-routing.module';\n\nimport { DonsPage } from './dons.page';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder/ngx';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DonsPageRoutingModule\n  ],\n providers:[NativeGeocoder],\n  declarations: [DonsPage]\n})\nexport class DonsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActionSheetController, ModalController } from '@ionic/angular';\nimport { IDon } from 'src/app/models/don.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderResult } from '@ionic-native/native-geocoder/ngx';\nimport { ModalCategoryPage } from 'src/app/modals/modal-category/modal-category.page';\nimport { ModalEtatPage } from 'src/app/modals/modal-etat/modal-etat.page';\nimport TimeAgo from 'javascript-time-ago';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { Router } from '@angular/router';\n@Component({\n  selector: 'app-dons',\n  templateUrl: './dons.page.html',\n  styleUrls: ['./dons.page.scss'],\n})\nexport class DonsPage implements OnInit {\n\n  constructor(private manageDataService:ManageDataService,\n    private nativGeocoder:NativeGeocoder,private modalCtrl:ModalController,\n    private authService: AuthService,private http:HttpClient,private router:Router) { }\n\n  ngOnInit() {\n    this.myData = JSON.parse(localStorage.getItem('mydata'));\n    console.log(this.myData);\n    this.current_page = 1;\n    this.dons = [];\n    this.getDons();\n    this.myid = JSON.parse(localStorage.getItem('mydata')).id;\n    setInterval(()=>{\n      const tabBar = document.getElementById('app-tab-bar');\n      tabBar.style.display = 'flex';\n    },100)\n    TimeAgo.addDefaultLocale(fr);\n    \n  }\n  /*-----------------------------VARIABLES-----------------------------*/\n  private myid :number = null;\n  public dons:IDon[]=[];\n  GeocoderOption:any={useLocale: true,maxResults: 5};\n  public selectedCategory : string[]=[];\n  public selectedEtat:string[]=[];\n  public storage = 'http://127.0.0.1:8000/storage/';\n  public current_page :number = 1;\n  public next_page : number = this.current_page;\n  public last_page :number = null;\n  public myData:any = {};\n  /*-----------------------------FUNCTIONS-----------------------------*/\n  public timeAgo(created_at:any):string{\n    const timeAgo = new TimeAgo('fr-EU');\n    const elapsedTime = timeAgo.format(new Date(Date.parse(created_at)-60*1000));\n    return elapsedTime\n  }\n  get id ():number{return this.myid}\n  public async openModal(){\n    const modal = await this.modalCtrl.create({\n      component:ModalCategoryPage,\n      componentProps:{\n        selectedCategory:this.selectedCategory\n      },\n      breakpoints:[0,0.65],\n      initialBreakpoint:0.65,\n      animated:true,\n      handle:true\n    });\n    modal.present();\n    const {data,role } = await modal.onWillDismiss();\n    if(role ==='confirm'){\n      this.selectedCategory=data;\n    }\n  }\n  public async openModalEtat(){\n  const modal = await this.modalCtrl.create({\n    component:ModalEtatPage,\n    componentProps:{\n      selectedEtat:this.selectedEtat\n    },\n    mode:'md',\n      breakpoints:[0,1],\n      initialBreakpoint:0.35,\n      animated:true,\n      handle:true\n  });\n  modal.present();\n  const {data,role} = await modal.onWillDismiss();\n  if(role ==='confirm'){\n    this.selectedEtat=data;\n  }\n}\n  public refreshFilter(){\n    this.selectedCategory = [];\n    this.selectedEtat = [];\n  }\n  image(don:any):any{\n    let url = '';\n    don.media.length>0?url= `${this.storage+don.media[0].filePath}`: url='../../../../../../assets/images/empty.webp'\n    return url;\n  }\n  getDons(){\n    \n    this.manageDataService.getDons(this.current_page).toPromise().then(\n      data=>{\n        this.last_page = data.last_page;\n        console.log(this.last_page)\n        data.data.forEach((don)=>{\n          this.dons.push(don);\n        })\n      },\n    ).catch(err=>{\n\n    }).finally(()=>{\n      this.current_page+=1;\n    })\n  }\n  public loadData(event:any){\n    setTimeout(()=>{\n      console.log(this.current_page,this.last_page)\n      this.current_page <= this.last_page ? this.getDons():this.current_page;  \n      event.target.complete();    \n    },500)\n    \n  }\n  // public filtre(category:string , etat:string):boolean{\n  //   let res:boolean;\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.length<1)||\n  // (this.selectedCategory.length <1 && this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.length<1&&this.selectedEtat.length<1)?res=true:res=false;\n  // return res;\n  // }\n  \n  doRefresh(event){\n   setTimeout(()=>{\n    this.ngOnInit(); \n    event.target.complete();\n   },500)\n  }\n  refresh(){\n    this.ngOnInit();\n  }\n}\n"],"names":["Component","ModalController","ManageDataService","fr","NativeGeocoder","ModalCategoryPage","ModalEtatPage","TimeAgo","HttpClient","AuthService","Router","DonsPage","constructor","manageDataService","nativGeocoder","modalCtrl","authService","http","router","useLocale","maxResults","current_page","ngOnInit","myData","JSON","parse","localStorage","getItem","console","log","dons","getDons","myid","id","setInterval","tabBar","document","getElementById","style","display","addDefaultLocale","timeAgo","created_at","elapsedTime","format","Date","openModal","modal","create","component","componentProps","selectedCategory","breakpoints","initialBreakpoint","animated","handle","present","data","role","onWillDismiss","openModalEtat","selectedEtat","mode","refreshFilter","image","don","url","media","length","storage","filePath","toPromise","then","last_page","forEach","push","catch","err","finally","loadData","event","setTimeout","target","complete","doRefresh","refresh","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}