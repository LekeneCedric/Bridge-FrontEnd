{"version":3,"file":"src_app_pages_home_dons_dons_module_ts.js","mappings":"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","sources":["./src/app/pages/home/dons/dons-routing.module.ts","./src/app/pages/home/dons/dons.module.ts","./src/app/pages/home/dons/dons.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DonsPage } from './dons.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DonsPage,\n  },\n  {\n    path:'details/:id',\n    loadChildren: () => import('../../details/details-don/details-don.module').then(m => m.DetailsDonPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DonsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DonsPageRoutingModule } from './dons-routing.module';\n\nimport { DonsPage } from './dons.page';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder/ngx';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DonsPageRoutingModule\n  ],\n providers:[NativeGeocoder],\n  declarations: [DonsPage]\n})\nexport class DonsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { IDon } from 'src/app/models/don.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { ModalCategoryPage } from 'src/app/modals/modal-category/modal-category.page';\nimport { ModalEtatPage } from 'src/app/modals/modal-etat/modal-etat.page';\nimport TimeAgo from 'javascript-time-ago';\nimport { environment } from 'src/environments/environment';\n@Component({\n  selector: 'app-dons',\n  templateUrl: './dons.page.html',\n  styleUrls: ['./dons.page.scss'],\n})\nexport class DonsPage implements OnInit {\n\n  constructor(private manageDataService:ManageDataService,private modalCtrl:ModalController) {}\n\n  ngOnInit() {\n    this.notifications = [];\n    this.loadingDons = true;\n    this.myid = JSON.parse(localStorage.getItem('mydata')).id;\n    setInterval(()=>{\n      if(this.loadingDons==true && this.dons.length<1){\n          this.is_null_Don = true;\n      }\n      else if (this.loadingDons==true && this.dons.length>1){\n        this.is_null_Don = false;\n        this.loadingDons = false\n      }\n    },100)\n    setInterval(()=>{\n      if(this.is_null_Don)\n      {\n        if(this.dons.length>0){\n          this.is_null_Don = false;\n          this.loadingDons=false;\n        }\n        else{\n          this.is_null_Don = true;\n          this.loadingDons=false;\n        }\n      }\n      else if (!this.is_null_Don){\n        if(this.dons.length<1){\n          this.is_null_Don = true;\n          this.loadingDons=false;\n        }\n        else{\n          this.is_null_Don = false;\n          this.loadingDons=false;\n        }\n      }\n    },100)\n    setTimeout(()=>{\n      this.dons.length <1 ? this.is_null_Don = true:this.is_null_Don = false;\n      this.loadingDons = false\n    },10000)\n    this.dons = [];\n    this.loadingDons= true;\n    this.is_null_Don= false;\n    this.myData = JSON.parse(localStorage.getItem('mydata'));\n    console.log(this.myData);\n    this.current_page = 1;\n    this.getDons();\n    this.getMyNotifications();\n    setInterval(()=>{\n      const tabBar = document.getElementById('app-tab-bar');\n      tabBar.style.display = 'flex';\n    },100)\n    TimeAgo.addDefaultLocale(fr);\n   \n  }\n  /*-----------------------------VARIABLES-----------------------------*/\n  public loadingDons:boolean = false;\n  public is_null_Don:boolean = false;\n  private myid :number = null;\n  public dons:IDon[]=[];\n  public donContainer:IDon[] = [];\n  GeocoderOption:any={useLocale: true,maxResults: 5};\n  public selectedCategory : string[]=[];\n  public selectedEtat:string[]=[];\n  public storage = environment.storage;\n  public current_page :number = 1;\n  public next_page : number = this.current_page;\n  public last_page :number = null;\n  public myData:any = {};\n  public notifications:any[] = [];\n  /*-----------------------------FUNCTIONS-----------------------------*/\n \n  public timeAgo(created_at:any):string{\n    const timeAgo = new TimeAgo('fr-EU');\n    const elapsedTime = timeAgo.format(new Date(Date.parse(created_at)-60*1000));\n    return elapsedTime\n  }\n  get id ():number{return this.myid}\n  public async openModal(){\n    const modal = await this.modalCtrl.create({\n      component:ModalCategoryPage,\n      componentProps:{\n        selectedCategory:this.selectedCategory\n      },\n      breakpoints:[0,0.65],\n      initialBreakpoint:0.65,\n      animated:true,\n      handle:true\n    });\n    modal.present();\n    const {data,role } = await modal.onWillDismiss();\n    if(role ==='confirm'){\n      this.selectedCategory=data;\n      this.dons = this.donContainer;\n      console.log(this.selectedCategory)\n      if(this.selectedCategory.length>0 && this.selectedEtat.length<1)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedCategory.includes(don.category);\n        }); \n      }\n      else if (this.selectedCategory.length>0 && this.selectedEtat.length>0)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedCategory.includes(don.category) && this.selectedEtat.includes(don.etat);\n        });   \n      }\n      else if (this.selectedCategory.length<1 && this.selectedEtat.length>0)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedEtat.includes(don.etat);\n        }); \n      }\n    }\n  }\n  public async openModalEtat(){\n  const modal = await this.modalCtrl.create({\n    component:ModalEtatPage,\n    componentProps:{\n      selectedEtat:this.selectedEtat\n    },\n    mode:'md',\n      breakpoints:[0,1],\n      initialBreakpoint:0.35,\n      animated:true,\n      handle:true\n  });\n  modal.present();\n  const {data,role} = await modal.onWillDismiss();\n  if(role ==='confirm'){\n    this.dons = this.donContainer;\n    this.selectedEtat=data;\n    if(this.selectedCategory.length>0 && this.selectedEtat.length<1)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedCategory.includes(don.category);\n        }); \n      }\n      else if (this.selectedCategory.length>0 && this.selectedEtat.length>0)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedCategory.includes(don.category) && this.selectedEtat.includes(don.etat);\n        });   \n      }\n      else if (this.selectedCategory.length<1 && this.selectedEtat.length>0)\n      {\n        this.dons = this.donContainer.filter((don)=>{\n          return this.selectedEtat.includes(don.etat);\n        }); \n      }\n  }\n}\n  public refreshFilter(){\n    console.log(this.donContainer)\n    this.dons = this.donContainer;\n    this.selectedCategory = [];\n    this.selectedEtat = [];\n  }\n  image(don:any):any{     \n    let url = '';\n    don.media.length>0?url= `${this.storage+don.media[0].filePath}`: url='assets/images/empty.webp'\n    return url;\n  }\n  public getMyNotifications(){\n    this.manageDataService.getNotificationDonateur(this.myid).toPromise().then(\n      data=>{\n        console.log(data)\n        data.forEach((notif)=>{\n          notif.vu==0? this.notifications.push(notif):null;\n        })\n      }\n    )\n  }\n  public getDons(){\n    \n    this.manageDataService.getDons(this.current_page).toPromise().then(\n      data=>{\n        this.last_page = data.last_page;\n        console.log(this.last_page)\n        data.data.forEach((don)=>{\n          this.dons.push(don);\n          this.donContainer.push(don);\n        })\n        this.selectedCategory.length>0?\n        this.dons = this.dons.filter((don)=>{\n          console.log(don.category)\n          return this.selectedCategory.includes(don.category);\n        }):null;\n         \n      },\n    ).catch(err=>{\n\n    }).finally(()=>{\n      this.current_page+=1;\n    })\n  }\n  public loadData(event:any){\n    setTimeout(()=>{\n      console.log(this.current_page,this.last_page)\n      this.current_page <= this.last_page ? this.getDons():this.current_page;  \n      event.target.complete();    \n    },500)\n    \n  }\n  // public filtre(category:string , etat:string):boolean{\n  //   let res:boolean;\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.length<1)||\n  // (this.selectedCategory.length <1 && this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.length<1&&this.selectedEtat.length<1)?res=true:res=false;\n  // return res;\n  // }\n  \n  doRefresh(event){\n   setTimeout(()=>{\n    this.ngOnInit(); \n    event.target.complete();\n   },500)\n  }\n  refresh(){\n    this.refreshFilter();\n    this.ngOnInit();\n  }\n}\n"],"names":["Component","ModalController","ManageDataService","fr","ModalCategoryPage","ModalEtatPage","TimeAgo","environment","DonsPage","constructor","manageDataService","modalCtrl","useLocale","maxResults","storage","current_page","ngOnInit","notifications","loadingDons","myid","JSON","parse","localStorage","getItem","id","setInterval","dons","length","is_null_Don","setTimeout","myData","console","log","getDons","getMyNotifications","tabBar","document","getElementById","style","display","addDefaultLocale","timeAgo","created_at","elapsedTime","format","Date","openModal","modal","create","component","componentProps","selectedCategory","breakpoints","initialBreakpoint","animated","handle","present","data","role","onWillDismiss","donContainer","selectedEtat","filter","don","includes","category","etat","openModalEtat","mode","refreshFilter","image","url","media","filePath","getNotificationDonateur","toPromise","then","forEach","notif","vu","push","last_page","catch","err","finally","loadData","event","target","complete","doRefresh","refresh","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}