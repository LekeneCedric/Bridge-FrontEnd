{"version":3,"file":"src_app_pages_home_dons_dons_module_ts.js","mappings":"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","sources":["./src/app/pages/home/dons/dons-routing.module.ts","./src/app/pages/home/dons/dons.module.ts","./src/app/pages/home/dons/dons.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DonsPage } from './dons.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DonsPage,\n  },\n  {\n    path:'details/:id',\n    loadChildren: () => import('../../details/details-don/details-don.module').then(m => m.DetailsDonPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DonsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DonsPageRoutingModule } from './dons-routing.module';\n\nimport { DonsPage } from './dons.page';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder/ngx';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DonsPageRoutingModule\n  ],\n providers:[NativeGeocoder],\n  declarations: [DonsPage]\n})\nexport class DonsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActionSheetController, ModalController } from '@ionic/angular';\nimport { IDon } from 'src/app/models/don.model';\nimport { ManageDataService } from 'src/app/services/manage-data/manage-data.service';\nimport fr from 'javascript-time-ago/locale/fr'\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderResult } from '@ionic-native/native-geocoder/ngx';\nimport { ModalCategoryPage } from 'src/app/modals/modal-category/modal-category.page';\nimport { ModalEtatPage } from 'src/app/modals/modal-etat/modal-etat.page';\nimport TimeAgo from 'javascript-time-ago';\nimport { HttpClient } from '@angular/common/http';\n@Component({\n  selector: 'app-dons',\n  templateUrl: './dons.page.html',\n  styleUrls: ['./dons.page.scss'],\n})\nexport class DonsPage implements OnInit {\n\n  constructor(private manageDataService:ManageDataService,\n    private nativGeocoder:NativeGeocoder,private modalCtrl:ModalController,private http:HttpClient) { }\n\n  ngOnInit() {\n    this.http.get<any>('assets/country_dial_info.json').toPromise().then(\n      data=>{\n        console.log(data);\n      }\n    )\n    this.myData = JSON.parse(localStorage.getItem('mydata'));\n    console.log(this.myData);\n    this.current_page = 1;\n    this.next_page = 2;\n    this.dons = [];\n    this.getDons();\n    this.myid = JSON.parse(localStorage.getItem('mydata')).id;\n    setInterval(()=>{\n      const tabBar = document.getElementById('app-tab-bar');\n      tabBar.style.display = 'flex';\n    },100)\n    TimeAgo.addDefaultLocale(fr);\n    \n  }\n  /*-----------------------------VARIABLES-----------------------------*/\n  private myid :number = null;\n  public dons:IDon[]=[];\n  GeocoderOption:any={useLocale: true,maxResults: 5};\n  public selectedCategory : string[]=[];\n  public selectedEtat:string[]=[];\n  public storage = 'http://127.0.0.1:8000/storage/';\n  public current_page :number = 1;\n  public next_page : number = 1;\n  public last_page :number = null;\n  public myData:any = {};\n  /*-----------------------------FUNCTIONS-----------------------------*/\n  public timeAgo(created_at:any):string{\n    const timeAgo = new TimeAgo('fr-EU');\n    const elapsedTime = timeAgo.format(new Date(Date.parse(created_at)-60*1000));\n    return elapsedTime\n  }\n  get id ():number{return this.myid}\n  public async openModal(){\n    const modal = await this.modalCtrl.create({\n      component:ModalCategoryPage,\n      componentProps:{\n        selectedCategory:this.selectedCategory\n      },\n      breakpoints:[0,0.65],\n      initialBreakpoint:0.65,\n      animated:true,\n      handle:true\n    });\n    modal.present();\n    const {data,role } = await modal.onWillDismiss();\n    if(role ==='confirm'){\n      this.selectedCategory=data;\n    }\n  }\n  public async openModalEtat(){\n  const modal = await this.modalCtrl.create({\n    component:ModalEtatPage,\n    componentProps:{\n      selectedEtat:this.selectedEtat\n    },\n    mode:'md',\n      breakpoints:[0,1],\n      initialBreakpoint:0.35,\n      animated:true,\n      handle:true\n  });\n  modal.present();\n  const {data,role} = await modal.onWillDismiss();\n  if(role ==='confirm'){\n    this.selectedEtat=data;\n  }\n}\n  public refreshFilter(){\n    this.selectedCategory = [];\n    this.selectedEtat = [];\n  }\n  image(don:any):any{\n    let url = '';\n    don.media.length>0?url= `${this.storage+don.media[0].filePath}`: url='../../../../../../assets/images/empty.webp'\n   \n    return url;\n  }\n  getDons(){\n    this.manageDataService.getDons(this.current_page).toPromise().then(\n      data=>{\n        this.last_page = data.last_page;\n        data.data.forEach((don)=>{\n          this.dons.unshift(don);\n        })\n      },\n    ).catch(err=>{\n\n    })\n  }\n  public loadData(event:any){\n    setTimeout(()=>{\n      this.current_page < this.last_page ?this.current_page = this.next_page:this.current_page;\n      this.next_page < this.last_page ? this.next_page+=1:this.next_page;\n      this.current_page < this.last_page ? this.getDons() : event.target.disabled=true;\n      event.target.complete();\n    },500)\n    \n  }\n  // public filtre(category:string , etat:string):boolean{\n  //   let res:boolean;\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.includes(category)&&this.selectedEtat.length<1)||\n  // (this.selectedCategory.length <1 && this.selectedEtat.includes(etat))||\n  // (this.selectedCategory.length<1&&this.selectedEtat.length<1)?res=true:res=false;\n  // return res;\n  // }\n  \n  doRefresh(event){\n   setTimeout(()=>{\n    this.ngOnInit(); \n    event.target.complete();\n   },500)\n  }\n  refresh(){\n    this.ngOnInit();\n  }\n}\n"],"names":["Component","ModalController","ManageDataService","fr","NativeGeocoder","ModalCategoryPage","ModalEtatPage","TimeAgo","HttpClient","DonsPage","constructor","manageDataService","nativGeocoder","modalCtrl","http","useLocale","maxResults","ngOnInit","get","toPromise","then","data","console","log","myData","JSON","parse","localStorage","getItem","current_page","next_page","dons","getDons","myid","id","setInterval","tabBar","document","getElementById","style","display","addDefaultLocale","timeAgo","created_at","elapsedTime","format","Date","openModal","modal","create","component","componentProps","selectedCategory","breakpoints","initialBreakpoint","animated","handle","present","role","onWillDismiss","openModalEtat","selectedEtat","mode","refreshFilter","image","don","url","media","length","storage","filePath","last_page","forEach","unshift","catch","err","loadData","event","setTimeout","target","disabled","complete","doRefresh","refresh","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}